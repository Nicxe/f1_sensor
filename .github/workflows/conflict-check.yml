name: Conflict check

on:
  push:
    branches: [dev, content]
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write

jobs:
  conflict:
    name: Check for merge conflicts
    runs-on: ubuntu-latest
    steps:
      - uses: eps1lon/actions-label-merge-conflict@v3
        with:
          dirtyLabel: "has-conflicts"
          repoToken: ${{ secrets.GITHUB_TOKEN }}
          commentOnDirty: |
            This PR has merge conflicts with the target branch and cannot be merged until they are resolved.

            Please rebase or merge the target branch into your branch and resolve the conflicts locally, then push the updated branch.
          commentOnClean: |
            Merge conflicts have been resolved. Thank you!
